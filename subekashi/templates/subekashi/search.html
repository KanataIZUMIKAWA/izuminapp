{% extends "subekashi/base/base.html" %}
{% block title %}曲の一覧と検索{% endblock %}
{% block ogtitle %}曲の一覧と検索{% endblock %}
{% load static %}
{% load comma %}
{% block css %}{% static 'subekashi/css/search.css'%}{% endblock %}

{% block content %}
<section>
    
    <h1>曲の一覧と検索</h1>
    <div class="underline"></div>

    <div id="searchform">
        <label>タイトル　　</label>
        <input type="text" id="title" class="sansfont" name="title" oninput="searchSong()"><br>
        <label>チャンネル名</label>
        <input type="text" id="channel" name="channel" oninput="searchSong()"><br>
        <label>歌詞　　　　</label>
        <input type="text" id="lyrics" name="lyrics" oninput="searchSong()"><br>
        <div id="categorysec">
            <label>カテゴリ　　</label>
            <select id="category" name="category" oninput="searchSong()">
                <option>全ての模倣</option>
                <option>.模倣</option>
                <option>..模倣</option>
                <option>教育模倣</option>
                <option>アブジェ模倣</option>
                <option>...模倣</option>
                <option>表╱裏模倣</option>
                <option>名の無い星が空に堕ちたら模倣</option>
                <option>エヌ模倣</option>
                <option>K²模倣</option>
            </select>
        </div><br>
        <label>フィルタ</label>
        <div onclick="searchSong()">
            <div class="devInput" onclick="devInput(0)">
                <input type="checkbox" class="filters" value="isCompleted" oninput="searchSong()">
                <label>作成途中</label>
            </div>
            <div class="devInput" onclick="devInput(1)">
                <input type="checkbox" class="filters" value="isoriginal" oninput="searchSong()">
                <label>オリジナル模倣曲</label>
            </div>
            <div class="devInput" onclick="devInput(2)">
                <input type="checkbox" class="filters" value="isjoke" oninput="searchSong()">
                <label>ネタ曲</label>
            </div>
            <div class="devInput" onclick="devInput(3)">
                <input type="checkbox" class="filters" value="isinst" oninput="searchSong()">
                <label>インスト曲</label>
            </div>
            <div class="devInput" onclick="devInput(4)">
                <input type="checkbox" class="filters" value="issubeana" oninput="searchSong()" checked>
                <label>すべあな界隈曲</label>
            </div>
            <div class="devInput" onclick="devInput(5)">
                <input type="checkbox" class="filters" value="isxx" oninput="searchSong()">
                <label>すべあな界隈以外の曲</label>
            </div>
        </div>
    </div>
    {% for songIns in songInsL %}
        <a href="{% url 'subekashi:song' songIns.id %}" class="buttona ">
            <div class="songcard" id="song{{ songIns.id }}">
                <div class="cardleft">
                    <p class="songtitle sansfont"><i class="fas fa-music"></i> {{ songIns.title|slice:"20" }}</p>
                    {% if songIns.channel|iscomma %}
                        <object><p><i class="fas fa-user-friends"></i>合作</p></object>
                    {% else %}
                        <object><a class="songchannel" href="{% url 'subekashi:channel' songIns.channel %}"><i class="fas fa-user-circle"></i> {{ songIns.channel|slice:"20" }}</a></object>
                    {% endif %}
                </div>
                <div class="cardright">
                    {% if songIns.lyrics %}
                        <p class="songlyrics">{{ songIns.lyrics|slice:"20" }}...</p>
                    {% else %}
                        {% if songIns.isinst %}
                            <p class="songlyrics">インスト曲</p>
                        {% else %}
                            <object><a class="songlyrics" href="{% url 'subekashi:new' %}?id={{ songIns.id }}">歌詞未登録</a></object>
                        {% endif %}
                    {% endif %}
                    <br>
                    {% if songIns.url %}
                        {% if songIns.url|iscomma %}
                            <object><a class="songurl" href="{{ songIns.url|commapop }}">{{ songIns.url|commapop|slice:"30" }}</a>など</object>
                        {% else %}
                            <object><a class="songurl" href="{{ songIns.url }}">{{ songIns.url|slice:"30" }}</a></object>
                        {% endif %}
                        {% else %}
                        {% if songIns.isdeleted %}
                            <object><p class="songurl">非公開</p></object>
                        {% else %}
                            <object><a class="songurl" href="{% url 'subekashi:new' %}?id={{ songIns.id }}">URL未登録</a></object>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </a>
    {% endfor %}
    <p id="notfound">見つかりませんでした。</p>
</section>
{% endblock %}

{% block js %}
<script defer src="{% static 'subekashi/js/search.js' %}?{{ lastModified }}" rel="stylesheet"></script>
<script defer>
    window.addEventListener('load', function(){
        firstLoad('{{ query|safe }}');
        }
    )
</script>
{% endblock %}
