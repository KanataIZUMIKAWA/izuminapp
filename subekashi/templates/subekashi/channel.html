{% extends "subekashi/base/base.html" %}
{% block title %}{{ channel }}{% endblock %}
{% block ogtitle %}{{ channel }}{% endblock %}
{% load static %}
{% block css %}{% static 'subekashi/css/channel.css'%}{% endblock %}

{% block content %}
<section id="channelsettion">
    <h1>{{ channel }}</h1>
    <div class="underline"></div>
    {% if ins_songs %}
        {% for ins_song in ins_songs %}
            <div class="songcard" onclick="songpage('{{ basedir }}', '{{ ins_song.id }}')">
                <div class="cardleft">
                    <p class="songtitle"><i class="fas fa-music"></i> {{ ins_song.title|slice:"30" }}</p>
                    {% if ins_song.url %}
                        <a class="songurl" href="{{ ins_song.url }}">{{ ins_song.url|slice:"35" }}</a>
                    {% else %}
                    <p class="songurlnotfound">URL未登録</p>
                    {% endif %}
                </div>
                <div class="cardright">
                    {% if ins_song.lyrics %}
                        <p class="songlyrics1">{{ ins_song.lyrics|slice:"25" }}</p>
                        <p class="songlyrics2">{{ ins_song.lyrics|slice:"25:50" }}...</p>
                    {% else %}
                        <p class="songlyricsnotfound">歌詞未登録</p>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p id="songnotfound">曲が見つかりませんでした</p>
    {% endif %}
    <div id="tonew" class="dummybutton" onclick="tonew()"><p class="dummybuttonp">曲を登録する</p></div>
</section>
{% endblock %}

{% block js %}
    <script src="{% static 'subekashi/js/songlist.js' %}" rel="stylesheet"></script>
    <script src="{% static 'subekashi/js/fixfooter.js' %}" rel="stylesheet"></script>
    <script>
        function tonew() {
            window.location.href = "{% url 'new' %}?channel={{ channel }}";
        }

        window.addEventListener('load', function(){
            if ('{{fixfooter}}') {
                fixfooter();
            }
        });
    </script>
{% endblock %}