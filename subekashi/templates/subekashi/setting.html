{% extends "subekashi/base/base.html" %}
{% block title %}設定{% endblock %}
{% block ogtitle %}設定{% endblock %}
{% load static %}
{% block css %}{% static 'subekashi/css/setting.css'%}{% endblock %}

{% block content %}
<section>
    <h1>設定</h1>
    <div class="underline"></div>
    <label>界隈曲の表示</label>
    <select id="songrange" onchange="setting(true)">
        <option value="all">全て表示</option>
        <option value="subeana" selected>すべあな界隈曲のみを表示</option>
        <option value="xx">すべあな界隈曲以外を表示</option>
    </select>
    <p>トップページのみ動作します。その他ページでの設定の反映はまだできていません。</p>
    <br>
    <label>ネタ曲の表示</label>
    <select id="jokerange" onchange="setting(true)">
        <option value="on">表示</option>
        <option value="off" selected>非表示</option>
    </select>
    <br>
    <label>歌詞の改行</label>
    <select id="brlyrics" onchange="setting(true)">
        <option value="normal" selected>全ての改行を表示</option>
        <option value="pack">連続した改行を非表示</option>
        <option value="brless">全ての改行を非表示</option>
    </select>
    <br>
    <label>宣伝を表示</label>
    <select id="adrange" onchange="setting(true)">
        <option value="on" selected>表示</option>
        <option value="off">非表示</option>
    </select>
    <p>非営利目的の宣伝機能を実装する予定です。まだ未実装です。</p>
    <br>
    <br>
    <br>
</section>
{% endblock %}

{% block js %}
<script src="{% static 'subekashi/js/fixfooter.js' %}" rel="stylesheet"></script>
<script>
    var selectEles = document.getElementsByTagName("select");
    var settingMap = ["songrange", "jokerange", "brlyrics", "adrange"];

    function setting(isUpdate) {
        var i = 0;
        for (selectEle of selectEles) {
            value = getCookie()[settingMap[i]];
            if ((value === undefined) || isUpdate) {
                setCookie(settingMap[i], selectEle.value);
            } else {
                selectEle.value = value;
            }
            i++;
        }
    }

    window.addEventListener('load', function(){
        setting(false);
        fixfooter();
    });
</script>
{% endblock %}
