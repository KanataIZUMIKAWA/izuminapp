{% extends "subekashi/base/base.html" %}
{% block title %}曲の登録{% endblock %}
{% block ogtitle %}曲の登録{% endblock %}
{% load static %}
{% block css %}{% static 'subekashi/css/new.css'%}{% endblock %}

{% block content %}
<section>
    <h1> 曲の登録 </h1>
    <div class="underline"></div>
    <form action="{% url 'new' %}" method="POST" class="post-form" id="newForm">{% csrf_token %}
        <label>曲名*</label>
        <input type="text" id="title" name="title" oninput="newform(); isExistSong('{{basedir}}')" value="{{ title }}"><br>
        <label>作者*</label>
        <input type="text" id="channel" name="channel" oninput="newform(); isExistSong('{{basedir}}')" value="{{ channel }}"><br>
        <label>URL</label>
        <input type="text" id="url" name="url" value="{{ url }}"><br>
        <div id="imitates">
            <label>模倣*</label>
            <select id="imitate" name="imitate" oninput="appendimitatef();">
                <option>選択してください</option>
                <option>.模倣</option>
                <option>..模倣</option>
                <option>教育模倣</option>
                <option>アブジェ模倣</option>
                <option>...模倣</option>
                <option>表/裏模倣</option>
                <option>名の無い星が空に堕ちたら模倣</option>
                <option>エヌ模倣</option>
                <option>K²模倣</option>
                <option>オリジナル模倣</option>
                <option>模倣曲模倣</option>
            </select>
            <div id="imitateimitatediv">
                <label>模倣曲模倣の曲名*</label>
                <input type="text" id="imitateimitate"><br>
                {% for ins_song in ins_songs %}
                    <div class="songrow">
                        <p class="songs" id="{{ ins_song.title }}" onclick="titleinput('{{ ins_song.title }}')"><span class="channel"><i class="fas fa-user-circle"></i> {{ ins_song.channel }}</span> <i class="fas fa-music"></i> {{ ins_song.title }}</p>
                    </div>
                {% endfor %}
            </div>
            <br>
        </div>
        <button type="button" id="appendimitate" onclick="appendimitatef()" disabled>模倣2を追加</button>
        <button type="button" id="deleteimitate" onclick="deleteimitatef()">模倣1を削除</button><br>
        <label id="lyricslabel">歌詞</label>
        <textarea id="lyrics" name="lyrics" oninput="autotextarea()"></textarea><br>
        <input type="checkbox" id="isjapanese" name="isjapanese" checked>
        <label>日本語の曲</label>
        <input type="checkbox" id="isjoke" name="isjoke">
        <label>ネタ曲</label><br>
        <input type="submit" value="登録" id="submit" disabled>
    </form>
    <p class="bottomelement">*がついているラベルは入力が必須です。</p>
</section>
{% endblock %}

{% block js %}
<script src="{% static 'subekashi/js/newform.js' %}" rel="stylesheet"></script>
<script>
    window.addEventListener('load', newform());
</script>

{% endblock %}