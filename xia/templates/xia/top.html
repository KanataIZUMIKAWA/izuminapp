{% extends "xia/base/base.html" %}
{% load static %}
{% block title %}トップ{% endblock %}
{% block ogtitle %}トップ{% endblock %}
{% block css %}{% static 'xia/css/top.css'%}{% endblock %}

{% block content %}
    <section class="firstview">
        <div class="clImg">
            <img src="{% static 'xia/image/top1.png' %}" alt="Xiaに関する画像">
            <img src="{% static 'xia/image/top2.png' %}" alt="Xiaに関する画像">
        </div>
        <b><span id="top_title">Xia 公式ホームページ</span></b>
    </section>

    <section class="welcome">
        <h1>Xiaについて</h1>
        <div class="underline"></div>
        <h2>概要</h2>
        <p>Xiaは<a href="https://earthmc.net/">EarthMC</a>の<a href="#dynmap">中国 運城市に位置する</a>日本人勢による国です。</p>
        <p>もともとはTN時代にRyo5Syo5（現kasana2005)がInca Empireという名称で建国したものが国の起源になっております。</p>
        <p>TA時代では中国に首都を置いていて、多くの町に囲まれた場所に位置しています。</p>

        <h2>基本情報</h2>
        {% if not ableAPI %}
            <p class="info_warning">この情報は最新ではありません。</p>
        {% endif %}
        <div class="container">
            <div class="info_item">
                <p class="info_title">国旗</p>
                <div class="info_underline"></div>
                <img class="info_flag" src="{% static 'xia/image/flag.png' %}">
            </div>

            <div class="info_item">
                <p class="info_title">首都</p>
                <div class="info_underline"></div>
                <p class="info_data info_data_small">{{ our.capital }}</p>
                <i class="fas fa-building"></i>
                <a href="https://earthmc.net/map/aurora/?worldname=earth&mapname=flat&zoom=6&x=20617&y=64&z=-7085">DynMapで見る</a>
            </div>

            <div class="info_item">
                <p class="info_title">人口</p>
                <div class="info_underline"></div>
                <p class="info_data">{{ our.population }} 人</p>
                <i class="fas fa-user-friends"></i>
                <a onclick="notfound()">プレイヤー情報を見る</a>
            </div>

            <div class="info_item">
                <p class="info_title">面積</p>
                <div class="info_underline"></div>
                <p class="info_data">{{ our.area }} チャンク</p>
                <i class="fas fa-cubes"></i>
            </div>
        </div>

        <h2 id="major_players">大臣紹介</h2>
        <!-- <p>ユーザー名が<span class="isonline">赤色</span>ならオンライン、<span class="isoffline">青色</span>ならオフライン、黒色ならオンライン情報の未取得を示しています。</p> -->
        <!-- <p>他のプレイヤーは<a onclick="notfound()">こちらから</a>閲覧できます。</p> -->
        <div class="container">
            {% for minister in ministers %}
                <div class="info_item">
                    {% if not ableAPI %}
                        <p class="info_title">{{ minister.player.name }}</p>
                    {% elif minister.player.online %}
                        <p class="info_title isonline">{{ minister.player.name }}</p>
                    {% else %}
                        <p class="info_title isoffline">{{ minister.player.name }}</p>
                    {% endif %}
                    <div class="info_underline"></div>
                    <p class="info_data">{{ minister.title }}</p>
                    {% if minister.player.uuid %}
                        <img class="skin" src="https://crafatar.com/renders/head/{{ minister.player.uuid }}">
                    {% else %}
                        <img class="unknown_skin" src="{% static 'xia/image/unknown_skin.png' %}">
                    {% endif %}
                    <label for="trigger" class="open_btn" onclick="playerpopup('{{ minister.player.uuid }}', '{{ minister.player.name }}', '{{ ableAPI }}', '{{ minister.player.online }}', '{{ minister.player.info }}')">詳しく見る</label>
                    <div class="popup_wrap">
                        <input id="trigger" type="checkbox">
                        <div class="popup_overlay">
                            <label for="trigger" class="popup_trigger"></label>
                            <div class="popup_content">
                                <label for="trigger" class="close_btn">x</label>
                                <p id="popup_name"></p>                                      
                                <img id="popup_skin">
                                <hr id="popup_hr">
                                <p id="popup_info"></p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <h2>地図</h2>
        <p>町名をクリックすると自動で地図が切り替わります</p>
        <div id="towns">
            <a onclick="changemap('SIEGE_NOVA_INCA')">SIEGE_NOVA_INCA</a>
            <a onclick="changemap('Yushiwan')">Yushiwan</a>
            <a onclick="changemap('inca_village')">inca_village</a>
        </div>
        <iframe id="dynmap" src="https://earthmc.net/map/aurora/?worldname=earth&mapname=flat&zoom=6&x=20620&y=64&z=-7094"></iframe>

        <h2>その他の情報</h2>
        <p>その他の情報については<a onclick="notfound()">こちらのページ</a>からご覧になることができます</p>

        <h1>Xia国民になろう！</h1>
        <div class="underline"></div>
        <h2>素敵な特典</h2>
        <p>準備中...</p>
        <!-- <ul class="itemlist">
            <li><img src="{% static 'xia/image/oak.png' %}">原木 64個</li>
            <li><img src="{% static 'xia/image/iron.png' %}">鉄インゴット 64個</li>
            <li><img src="{% static 'xia/image/diamond.png' %}">ダイヤモンド 32個</li>
            <li><img src="{% static 'xia/image/potato.png' %}">食料 64個</li>
            <li><i class="fas fa-cubes"></i>土地 1チャンク</li>
        </ul> -->

        <h2>Xia国民になるには</h2>
        <ul class="itemlist">
            <li><a href="#major_players">大臣</a>が<span clss="isonline">ログイン</span>している場合</li>
            <ol class="liindent1">
                <li>EarthMCに参加してください</li>
                <li>チャットを開き<code onclick="copyCode('/ch join japanese')">/ch join japanese</code>と入力してください。</li>
                <li><code onclick="copyCode('Xiaに入りたいです')">Xiaに入りたいです</code>とチャットで話してください。</li>
                <li>招待が届くので、<code onclick="copyCode('/accept')">/accept</code>と入力してください。これでXia国民になれます。</li>
                <li><code onclick="copyCode('/n spawn Xia')">/n spawn Xia</code>でXiaにテレポートできます。</li>
            </ol>
            <li><a href="#major_players">大臣</a>が<span clss="isonline">ログイン</span>していない場合</li>
            <ul class="liindent2">
                <ol class="liindent3">
                    <li>XiaのDiscordに参加します　URL:<a href="https://discord.gg/n9237pup6C">https://discord.gg/n9237pup6C</a></li>
                    <li>雑談チャンネルにて<code onclick="copyCode('@大臣 Xiaに入りたいです')">@大臣 Xiaに入りたいです</code>とチャットで話してください。</li>
                    <li>しばらくすると大臣より案内が来ますので指示に従ってください。</li>
                </ol>
            </ul>
        </ul>
        <p>※<code onclick="copyCode('このような見た目の文字')">このような見た目の文字</code>はクリック・タップすることでコピーをすることができます。</p>
        
        <h2>各種リンク</h2>
        <ul class="itemlist" id="links">
            <li><i class="fab fa-discord"></i>Xia Discord  URL:<a href="https://discord.gg/n9237pup6C">https://discord.gg/n9237pup6C</a></li>
            <li><i class="fab fa-youtube"></i>インカ放送局[公式]  URL:<a href="https://www.youtube.com/channel/UCbjn-i9H4iem98rTWYeZZ8w">https://www.youtube.com/channel/UCbjn-i9H4iem98rTWYeZZ8w</a></li>
            <li>インカ法務省公式ページ　URL:<a href="https://sites.google.com/view/inca-houmu-syou-koushiki">https://sites.google.com/view/inca-houmu-syou-koushiki</a></li>
            <li>EarthMC  URL:<a href="https://earthmc.net/">https://earthmc.net/</a></li>
            <!-- <li><i class=""></i>　URL:<a href=""></a></li> -->
        </ul>
    </section>
{% endblock %}

{% block js %}
    <script src="{% static 'xia/js/playerpopup.js' %}"></script>
    <script>
        window.onload = function() {
            // エラー用のtoaster
            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-bottom-right",
                "preventDuplicates": false,
                "onclick": null,
                "timeOut": "5000",
                "extendedTimeOut": "0",
                "showEasing": "swing",
                "hideEasing": "linear",
            }
            
            if ("{{ error }}") {
                toastr.warning("{{ error }}");
            }
        }

        
        // 複数画像をフェードインフェードアウトで切替
        $(document).ready(function(){
            $('.clImg img:gt(0)').hide();
            setInterval(function() {
                $('.clImg :first-child').fadeOut().next('img').fadeIn().end().appendTo('.clImg');
            },5000);
        });

        
        // マップの切り替え
        function changemap(town) {
            var map = document.getElementById("dynmap");
            if (town == "SIEGE_NOVA_INCA") {
                map.src = "https://earthmc.net/map/aurora/?worldname=earth&mapname=flat&zoom=6&x=20620&y=64&z=-7094";
            } else if (town == "Yushiwan") {
                map.src = "https://earthmc.net/map/aurora/?worldname=earth&mapname=flat&zoom=6&x=18456&y=64&z=-6976";
            } else if (town == "inca_village") {
                map.src = "https://earthmc.net/map/aurora/?worldname=earth&mapname=flat&zoom=5&x=19560&y=64&z=-7176";
            }
        }
    </script>
{% endblock %}